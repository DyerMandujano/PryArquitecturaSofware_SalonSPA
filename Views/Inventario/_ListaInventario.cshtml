@model List<Pry_Solu_SalonSPA.Models.InventarioViewModel>

@{
    string orden = ViewBag.Orden ?? "ASC";
    string nomProd = ViewBag.NomProd;
    string fechaInicio = ViewBag.FechaInicio;
    string fechaFin = ViewBag.FechaFin;
    string tipoMovimiento = ViewBag.TipoMovimiento;
    int pageNumber = ViewBag.PageNumber ?? 1;
    int pageSize = ViewBag.PageSize ?? 10;
}

<link href="~/css/VInventario/_ListaInventario.css" rel="stylesheet" />

<div class="contenedor-inventario">

    <div class="fila-inventario encabezado">
        <div>Producto</div>
        <div>Cantidad</div>
        <div>Precio</div>
        <div>Movimiento</div>
        <div>Fecha</div>
        <div>Stock Actual</div>
        <div>Estado</div>
    </div>

    @if (Model != null && Model.Any())
    {
        foreach (var item in Model)
        {
            var estadoClass = (item.Estado_Stock ?? "").ToUpper() switch
            {
                "AGOTADO" => "danger",
                "BAJO STOCK" => "warning",
                "EN STOCK" => "success",
                _ => "secondary"
            };

            var movimientoClass = (item.Tipo_Movimiento ?? "").ToUpper() switch
            {
                "ENTRADA" => "entrada",
                "SALIDA" => "salida",
                _ => "neutral"
            };

            <div class="fila-inventario">
                <div class="celda" data-label="Producto:" title="@(item.Nom_Prod ?? "Sin producto")">
                    @(item.Nom_Prod ?? "Sin producto")
                </div>

                <div class="celda" data-label="Cantidad:">@item.Cantidad</div>

                <div class="celda" data-label="Precio:">
                    S/. @(item.Precio?.ToString("N2") ?? "0.00")
                </div>

                <div class="celda" data-label="Movimiento:">
                    <span class="movimiento @movimientoClass">
                        @((item.Tipo_Movimiento ?? "N/A").ToUpper())
                    </span>
                </div>

                <div class="celda" data-label="Fecha:">
                    @(item.Fecha_Registro?.ToString("dd/MM/yyyy HH:mm") ?? "N/A")
                </div>

                <div class="celda" data-label="Stock:">@item.Stock_Actual</div>

                <div class="celda" data-label="Estado:">
                    <span class="badge @estadoClass">
                        @(item.Estado_Stock ?? "Desconocido")
                    </span>
                </div>
            </div>
        }
    }
    else
    {
        <div class="sin-resultados">
            <p>No se encontraron registros en el inventario con los filtros aplicados.</p>
        </div>
    }
</div>
