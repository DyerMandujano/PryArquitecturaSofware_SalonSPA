<link href="~/css/VServicios/_BuscarServicios.css" rel="stylesheet" />

<div class="busqueda-servicios">

    <form asp-action="Index" method="get" class="busqueda-form">
        <select name="tipoBusqueda" class="select-busqueda">
            <option value="TODOS">Todos</option>
            <option value="ID">ID Servicio</option>
            <option value="NOMBRE">Nombre</option>
            <option value="TIPO">Tipo Servicio</option>
        </select>

        <input type="text" name="valorBusqueda" placeholder="Buscar..." class="input-busqueda"
               value="@Context.Request.Query["valorBusqueda"]" />

        <button type="submit" class="btn-buscar">
            <i class="fas fa-search"></i> Buscar
        </button>

        <a asp-action="Index" class="btn-limpiar">
            <i class="fas fa-eraser"></i> Limpiar
        </a>
    </form>


    <div class="filtros-derecha">
        <select class="filtro-select" onchange="filtrarPorEstado(this.value)">
            <option value="">Todos los estados</option>
            <option value="1">Activos</option>
            <option value="0">Inactivos</option>
        </select>

    </div>

</div>
<script>
    function filtrarPorEstado(estado) {
        if (estado) {
            window.location.href = '@Url.Action("FiltrarPorEstado")' + '?estado=' + estado;
        } else {
            window.location.href = '@Url.Action("Index")';
        }
    }

       // Mantener los valores seleccionados después de la búsqueda
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);

            // Mantener tipo de búsqueda seleccionado
            const tipoBusqueda = urlParams.get('tipoBusqueda');
            if (tipoBusqueda) {
                document.querySelector('select[name="tipoBusqueda"]').value = tipoBusqueda;
            }

            // Mantener valor de búsqueda
            const valorBusqueda = urlParams.get('valorBusqueda');
            if (valorBusqueda) {
                document.querySelector('input[name="valorBusqueda"]').value = valorBusqueda;
            }
        });
        
 </script>